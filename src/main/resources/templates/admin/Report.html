<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Reports</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<nav class="navbar navbar-dark bg-dark navbar-custom">
    <div class="container-fluid">
        <div>
            <button class="navbar-toggler" type="button" id="toggleSidebar">
                <i class="bi-people-fill"> Admin</i>
            </button>
        </div>
        <div class="d-flex">
            <a class="nav-link active" aria-current="page" href="#"><b>Personal</b></a>
            <span class="border-right my-auto mx-2 text-white">
                <div class="vertical-line"></div>
            </span>
            <a class="nav-link text-white-50" aria-current="page" href="#">Feed</a>
        </div>
        <div class="d-flex align-items-center">
            <button class="navbar-toggler dropdown" role="button" href="#">
                <i class="bi-bell"></i>
            </button>
            <button class="navbar-toggler dropdown" role="button" href="#">
                <i class="bi-person-circle"></i> <span>Profile</span>
            </button>
        </div>
    </div>
</nav>
<!--main nav bar-->
<div class="navbar navbar-dark bg-dark w-100">
    <div class="container-fluid d-flex justify-content-around">
        <a class="nav-link text-white" href="Report.html" th:href="@{/report/all}">Reports</a>
        <a class="nav-link text-white" href="Requests.html" th:href="@{/groupRequest/all}">Requests</a>
        <a class="nav-link text-white" href="Stats.html" th:href="@{/stats/all}">Statistics</a>
    </div>
</div>
<div class="container">
    <h1>Reports</h1>
    <form method="get" th:action="@{/filter}">
        <label for="filter">Filter:</label>
        <select name="targetType" id="filter">
            <option value="">All</option>
            <option value="PERSON" th:selected="${selectedFilter == 'PERSON'}">Person</option>
            <option value="GROUP" th:selected="${selectedFilter == 'GROUP'}">Group</option>
            <option value="COMMENT" th:selected="${selectedFilter == 'COMMENT'}">Comment</option>
        </select>
        <button type="submit">Apply Filter</button>
    </form>
    <div class="table-container">
        <table>
            <thead>
            <tr>
                <th>Date</th>
                <th>Target Type</th>
                <th>Reason</th>
                <th>Reported By</th>
                <th>Target ID</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="report : ${reportList}">
                <td th:text="${report.date}"></td>
                <td th:text="${report.targetType}"></td>
                <td th:text="${report.reason}"></td>
                <td th:text="${report.targetId}"></td>
                <td>
                    <form method="post" th:action="@{/report/action/{id}(id=${report.id})}">
                        <button type="submit" name="action" value="IGNORE">Ignore</button>
                        <button type="submit" name="action" value="BAN">Ban</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
